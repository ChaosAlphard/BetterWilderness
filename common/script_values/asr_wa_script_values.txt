asr_wa_num_districts = {
  base = 0
  complex_trigger_modifier = {
    trigger_scope = planet
    trigger = num_districts
    parameters = { type = any }
    mode = add
  }
  min = 0
}

asr_wa_num_buildings = {
  base = 0
  complex_trigger_modifier = {
    trigger_scope = planet
    trigger = num_buildings
    parameters = {
      disabled = no
      type = any
      owner_type = normal
    }
    mode = add
  }
  min = 0
}

asr_wa_num_buildings_and_districts = {
  base = 0
  add = value:asr_wa_num_buildings
  add = value:asr_wa_num_districts
}

asr_wa_cor_bonus_build_speed = {
  base = 0
  set = value:asr_wa_num_buildings_and_districts
  modifier = {
    asr_wa_planet_is_wilderness_arcology = yes
    mult = 2
  }
}

# TODO: 需要评估对性能影响, 考虑是否使用 Country Variable 的形式
# 参考 event: bio.5107 bio.5108
asr_wa_cor_bonus_workforce_all = {
  base = 0
  modifier = {
    add = owner_main_species.value:species_traits_purity_count_value
  }
  min = 0
  mult = 2.5
  modifier = {
    asr_wa_planet_is_wilderness_world = yes
    add = 20
  }
}

asr_wa_num_wilderness_pops = {
  base = 0
  complex_trigger_modifier = {
    trigger_scope = planet
    trigger = count_owned_pop_amount
    parameters = {
      limit = { has_trait = trait_wilderness }
    }
    mode = add
  }
  min = 0
}

asr_wa_workforce_spawning_drone = {
  base = 0
  complex_trigger_modifier = {
    trigger_scope = planet
    trigger = count_owned_workforce
    parameters = {
      limit = {
        has_job_type = spawning_drone
      }
    }
    mode = add
  }
  min = $MIN$
}

asr_wa_amenities_ratio = {
  base = 0.2
  modifier = {
    has_active_building = building_avatar_chamber_4
    add = 0.3
  }
}

asr_wa_amenities_by_pops = {
  base = 0
  add = value:asr_wa_num_wilderness_pops
  mult = value:asr_wa_amenities_ratio
  min = 0
  floor = yes
}

# 如果有较大的非孵育体岗位的人口组装来源, 则可能导致孵育体岗位更少时获得更高的增长补偿
asr_wa_bonus_growth_by_pops = {
  base = 0
  set = @wa_bonus_growth_max_pops
  # 0-100人口 return 2000, 2100人口 return 0
  subtract = value:asr_wa_num_wilderness_pops
  max = @wa_bonus_growth_calc_max
  min = 0
  # 除以孵育体数量, 以保证额外增长实际数值不变
  divide = value:asr_wa_workforce_spawning_drone|MIN|100|
  # 20 * 25 * 1% = 500%
  mult = 25
  round_to = 0.01
}
