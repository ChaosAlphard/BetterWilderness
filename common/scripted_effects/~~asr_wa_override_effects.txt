# 空天适应 This = planet scope
# base 330 ap 100  leader 80  max 510
recalculate_aeronautic_adaptation_planet_modifier = {
  remove_modifier = aa_ship_planet_support_0
  remove_modifier = aa_ship_planet_support_1
  remove_modifier = aa_ship_planet_support_2
  remove_modifier = aa_ship_planet_support_3
  remove_modifier = aa_ship_planet_support_4
  remove_modifier = aa_ship_planet_support_5
  remove_modifier = aa_ship_planet_support_6
  remove_modifier = aa_ship_planet_support_7
  remove_modifier = aa_ship_planet_support_8
  remove_modifier = aa_ship_planet_support_9
  remove_modifier = aa_ship_planet_support_10
  set_variable = {
    which = aa_bio_ships_in_orbit
    value = 0
  }
  every_fleet_in_orbit = {
    limit = {
      controller = {
        NOT = { is_hostile = prevprev.controller }
      }
    }
    prev = {
      change_variable = {
        which = aa_bio_ships_in_orbit
        value = prev.value:bio_ship_naval_cap_usage
      }
    }
  }

  if = {
    limit = {
      check_variable = {
        which = aa_bio_ships_in_orbit
        value >= 1000
      }
    }
    add_modifier = {
      modifier = aa_ship_planet_support_10
      days = -1
    }
  }
  else_if = {
    limit = {
      check_variable = {
        which = aa_bio_ships_in_orbit
        value >= 800
      }
    }
    add_modifier = {
      modifier = aa_ship_planet_support_9
      days = -1
    }
  }
  else_if = {
    limit = {
      check_variable = {
        which = aa_bio_ships_in_orbit
        value >= 600
      }
    }
    add_modifier = {
      modifier = aa_ship_planet_support_8
      days = -1
    }
  }
  else_if = {
    limit = {
      check_variable = {
        which = aa_bio_ships_in_orbit
        value >= 400
      }
    }
    add_modifier = {
      modifier = aa_ship_planet_support_7
      days = -1
    }
  }
  else_if = {
    limit = {
      check_variable = {
        which = aa_bio_ships_in_orbit
        value >= 300
      }
    }
    add_modifier = {
      modifier = aa_ship_planet_support_6
      days = -1
    }
  }
  else_if = {
    limit = {
      check_variable = {
        which = aa_bio_ships_in_orbit
        value >= 200
      }
    }
    add_modifier = {
      modifier = aa_ship_planet_support_5
      days = -1
    }
  }
  else_if = { #lots of ship, big modifier
    limit = {
      check_variable = {
        which = aa_bio_ships_in_orbit
        value >= 100
      }
    }
    add_modifier = {
      modifier = aa_ship_planet_support_4
      days = -1
    }
  }
  else_if = {
    limit = {
      check_variable = {
        which = aa_bio_ships_in_orbit
        value >= 75
      }
    }
    add_modifier = {
      modifier = aa_ship_planet_support_3
      days = -1
    }
  }
  else_if = {
    limit = {
      check_variable = {
        which = aa_bio_ships_in_orbit
        value >= 50
      }
    }
    add_modifier = {
      modifier = aa_ship_planet_support_2
      days = -1
    }
  }
  else_if = {
    limit = {
      check_variable = {
        which = aa_bio_ships_in_orbit
        value >= 25
      }
    }
    add_modifier = {
      modifier = aa_ship_planet_support_1
      days = -1
    }
  }
  else_if = { #not a lot of ships, smol modifier
    limit = {
      check_variable = {
        which = aa_bio_ships_in_orbit
        value >= 1
      }
    }
    add_modifier = {
      modifier = aa_ship_planet_support_0
      days = -1
    }
  }
}
