# Food
building_massive_growth_1 = {
  icon = "massive_growth_1"
  ruined_icon = "wilderness_building_ruined"
  base_buildtime = @buildtime_1
  category = resource
  can_build = yes
  can_demolish = yes

  building_sets = {
    farming
  }

  inline_script = {
    script = buildings/wilderness_buildings_potential_destroy
  }

  inline_script = {
    script = asr_wa/building_resource_t1
    BASE = food
  }

  upgrades = {
    building_massive_growth_2
  }

  inline_script = {
    script = jobs/farmers_add
    AMOUNT = @building_static_jobs
  }

  inline_script = {
    script = buildings/on_all_wilderness_buildings_districts
  }

  ai_estimate_without_unemployment = yes
}

building_massive_growth_2 = {
  icon = "massive_growth_2"
  ruined_icon = "wilderness_building_ruined"
  base_buildtime = @buildtime_2
  category = resource
  can_build = no
  can_demolish = yes

  building_sets = {
    farming
  }

  inline_script = {
    script = buildings/wilderness_buildings_potential_destroy
  }
  allow = {
    has_upgraded_capital = yes
  }

  inline_script = {
    script = asr_wa/building_resource_t2
    BASE = food
    RARE = exotic_gases
  }

  prerequisites = {
    "tech_food_processing_1"
  }
  show_tech_unlock_if = {
    is_wilderness_empire = yes
  }

  upgrades = {
    building_massive_growth_3
  }

  inline_script = {
    script = jobs/farmers_add
    AMOUNT = @building_static_jobs_high
  }
  triggered_planet_modifier = {
    potential = { has_active_building = building_massive_growth_4 }
    job_agri_drone_add = @building_static_jobs
  }

  inline_script = {
    script = buildings/on_all_wilderness_buildings_districts
  }

  ai_estimate_without_unemployment = yes
}

building_massive_growth_3 = { # substitute for 'building_food_processing_facility'
  icon = "massive_growth_3"
  ruined_icon = "wilderness_building_ruined"
  base_buildtime = @buildtime_3
  category = resource
  can_build = no
  can_demolish = yes
  planet_limit = 1

  building_sets = {
    farming
  }

  potential = {
    exists = owner
    owner = { is_wilderness_empire = yes }
  }
  allow = {
    has_major_upgraded_capital = yes
    NOT = { has_modifier = resort_colony }
  }
  destroy_trigger = {
    exists = owner
    OR = {
      owner = {
        is_ai = yes
        country_uses_food = no
        is_wilderness_empire = no
      }
      is_planet_class = pc_machine
      has_modifier = resort_colony
      AND = {
        owner = { is_ai = yes }
        has_any_farming_district_or_building = no
      }
    }
  }

  inline_script = {
    script = asr_wa/building_resource_t3
    BASE = food
    RARE = exotic_gases
  }

  prerequisites = {
    "tech_food_processing_1"
  }
  show_tech_unlock_if = {
    is_wilderness_empire = yes
  }

  upgrades = {
    building_massive_growth_4
  }

  planet_modifier = {
    planet_farmers_food_produces_add = 2
  }
  triggered_planet_modifier = {
    potential = { has_exotic_gases_deposit = yes }
    planet_farmers_exotic_gases_produces_add = 0.5
  }

  inline_script = {
    script = jobs/farmers_add
    AMOUNT = @building_static_jobs_very_high
  }

  inline_script = {
    script = buildings/on_all_wilderness_buildings_districts
  }

  ai_estimate_without_unemployment = yes
}

building_massive_growth_4 = { # substitute for 'building_food_processing_center'
  icon = "massive_growth_4"
  ruined_icon = "wilderness_building_ruined"
  base_buildtime = @buildtime_4
  category = resource
  can_build = no
  can_demolish = yes
  planet_limit = 1

  building_sets = {
    farming
  }

  potential = {
    exists = owner
    owner = { is_wilderness_empire = yes }
  }
  allow = {
    has_fully_upgraded_capital = yes
    NOT = { has_modifier = resort_colony }
  }
  destroy_trigger = {
    OR = {
      AND = {
        exists = owner
        OR = {
          owner = {
            is_ai = yes
            country_uses_food = no
            is_wilderness_empire = no
          }
          AND = {
            owner = { is_ai = yes }
            has_any_farming_district_or_building = no
          }
        }
      }
      is_planet_class = pc_machine
      has_modifier = resort_colony
    }
  }

  inline_script = {
    script = asr_wa/building_resource_t4
    BASE = food
    RARE = exotic_gases
  }

  prerequisites = {
    "tech_food_processing_2"
  }
  show_tech_unlock_if = {
    is_wilderness_empire = yes
  }

  planet_modifier = {
    planet_farmers_food_produces_add = 2
    pop_agri_drone_bonus_workforce_mult = 0.20
  }
  triggered_planet_modifier = {
    potential = { has_exotic_gases_deposit = yes }
    planet_farmers_exotic_gases_produces_add = 0.5
  }
  triggered_planet_modifier = {
    potential = { is_ringworld = yes }
    planet_farmers_food_produces_add = 2
  }

  inline_script = {
    script = jobs/farmers_add
    AMOUNT = @building_static_jobs_very_high
  }

  triggered_desc = {
    text = asr_wa_building_massive_growth_4_tt
  }

  inline_script = {
    script = buildings/on_all_wilderness_buildings_districts
  }

  ai_estimate_without_unemployment = yes
}

# Energy
building_bioelectric_stimulator_1 = {
  icon = "bio_electric_stimulator_1"
  ruined_icon = "wilderness_building_ruined"
  base_buildtime = @buildtime_1
  category = resource
  can_build = yes
  can_demolish = yes

  building_sets = {
    generator
  }

  inline_script = {
    script = buildings/wilderness_buildings_potential_destroy
  }

  inline_script = {
    script = asr_wa/building_resource_t1
    BASE = food
  }

  upgrades = {
    building_bioelectric_stimulator_2
  }

  inline_script = {
    script = jobs/technicians_add
    AMOUNT = @building_static_jobs
  }

  inline_script = {
    script = buildings/on_all_wilderness_buildings_districts
  }

  ai_estimate_without_unemployment = yes
}

building_bioelectric_stimulator_2 = {
  icon = "bio_electric_stimulator_2"
  ruined_icon = "wilderness_building_ruined"
  base_buildtime = @buildtime_2
  category = resource
  can_build = no
  can_demolish = yes

  building_sets = {
    generator
  }

  inline_script = {
    script = buildings/wilderness_buildings_potential_destroy
  }
  allow = {
    has_upgraded_capital = yes
  }

  inline_script = {
    script = asr_wa/building_resource_t2
    BASE = food
    RARE = rare_crystals
  }

  prerequisites = {
    tech_power_hub_1
  }
  show_tech_unlock_if = {
    is_wilderness_empire = yes
  }

  upgrades = {
    building_bioelectric_stimulator_3
  }

  inline_script = {
    script = jobs/technicians_add
    AMOUNT = @building_static_jobs_high
  }
  triggered_planet_modifier = {
    potential = { has_active_building = building_bioelectric_stimulator_4 }
    job_technician_drone_add = @building_static_jobs
  }

  inline_script = {
    script = buildings/on_all_wilderness_buildings_districts
  }

  ai_estimate_without_unemployment = yes
}

building_bioelectric_stimulator_3 = { # substitute for 'building_energy_grid'
  icon = "bio_electric_stimulator_3"
  ruined_icon = "wilderness_building_ruined"
  base_buildtime = @buildtime_3
  category = resource
  can_build = no
  can_demolish = yes
  planet_limit = 1

  building_sets = {
    generator
  }

  potential = {
    exists = owner
    owner = { is_wilderness_empire = yes }
  }
  allow = {
    has_major_upgraded_capital = yes
    NOT = { has_modifier = resort_colony }
  }
  destroy_trigger = {
    exists = owner
    OR = {
      has_modifier = resort_colony
      AND = {
        owner = { is_ai = yes }
        has_any_generator_district_or_building = no
      }
      owner = { is_wilderness_empire = no }
    }
  }

  inline_script = {
    script = asr_wa/building_resource_t3
    BASE = food
    RARE = rare_crystals
  }

  prerequisites = {
    tech_power_hub_1
  }
  show_tech_unlock_if = {
    is_wilderness_empire = yes
  }

  upgrades = {
    building_bioelectric_stimulator_4
  }

  planet_modifier = {
    planet_technician_energy_produces_add = 2
  }
  triggered_planet_modifier = {
    potential = { has_volatile_motes_deposit = yes }
    planet_technician_volatile_motes_produces_add = 0.5
  }

  inline_script = {
    script = jobs/technicians_add
    AMOUNT = @building_static_jobs_very_high
  }

  inline_script = {
    script = buildings/on_all_wilderness_buildings_districts
  }

  ai_estimate_without_unemployment = yes
}

building_bioelectric_stimulator_4 = { # substitute for 'building_energy_nexus'
  icon = "bio_electric_stimulator_4"
  ruined_icon = "wilderness_building_ruined"
  base_buildtime = @buildtime_4
  category = resource
  can_build = no
  can_demolish = yes
  planet_limit = 1

  building_sets = {
    generator
  }

  potential = {
    exists = owner
    owner = { is_wilderness_empire = yes }
  }
  destroy_trigger = {
    exists = owner
    OR = {
      has_modifier = resort_colony
      AND = {
        owner = { is_ai = yes }
        has_any_generator_district_or_building = no
      }
      owner = { is_wilderness_empire = no }
    }
  }
  allow = {
    has_fully_upgraded_capital = yes
    NOT = { has_modifier = resort_colony }
  }

  inline_script = {
    script = asr_wa/building_resource_t4
    BASE = food
    RARE = rare_crystals
  }

  prerequisites = {
    tech_power_hub_2
  }
  show_tech_unlock_if = {
    is_wilderness_empire = yes
  }

  planet_modifier = {
    planet_technician_energy_produces_add = 2
    pop_technician_drone_bonus_workforce_mult = 0.20
  }
  triggered_planet_modifier = {
    potential = { has_volatile_motes_deposit = yes }
    planet_technician_volatile_motes_produces_add = 0.5
  }
  triggered_planet_modifier = {
    potential = { is_ringworld = yes }
    planet_technician_energy_produces_add = 2
  }

  inline_script = {
    script = jobs/technicians_add
    AMOUNT = @building_static_jobs_very_high
  }

  triggered_desc = {
    text = asr_wa_building_bioelectric_stimulator_4_tt
  }

  inline_script = {
    script = buildings/on_all_wilderness_buildings_districts
  }

  ai_estimate_without_unemployment = yes

}

# Mining
building_churning_tunnels_1 = {
  icon = "churning_tunnels_1"
  ruined_icon = "wilderness_building_ruined"
  base_buildtime = @buildtime_1
  category = resource
  can_build = yes
  can_demolish = yes

  building_sets = {
    mining
  }

  inline_script = {
    script = buildings/wilderness_buildings_potential_destroy
  }

  inline_script = {
    script = asr_wa/building_resource_t1
    BASE = food
  }

  inline_script = {
    script = jobs/miners_add
    AMOUNT = @building_static_jobs
  }

  upgrades = {
    building_churning_tunnels_2
  }

  inline_script = {
    script = buildings/on_all_wilderness_buildings_districts
  }

  ai_estimate_without_unemployment = yes
}

building_churning_tunnels_2 = {
  icon = "churning_tunnels_2"
  ruined_icon = "wilderness_building_ruined"
  base_buildtime = @buildtime_2
  category = resource
  can_build = no
  can_demolish = yes

  building_sets = {
    mining
  }

  inline_script = {
    script = buildings/wilderness_buildings_potential_destroy
  }
  allow = {
    has_upgraded_capital = yes
  }

  inline_script = {
    script = asr_wa/building_resource_t2
    BASE = food
    RARE = volatile_motes
  }

  prerequisites = {
    "tech_mineral_purification_1"
  }
  show_tech_unlock_if = {
    is_wilderness_empire = yes
  }

  upgrades = {
    building_churning_tunnels_3
  }

  inline_script = {
    script = jobs/miners_add
    AMOUNT = @building_static_jobs_high
  }
  triggered_planet_modifier = {
    potential = { has_active_building = building_churning_tunnels_4 }
    job_mining_drone_add = @building_static_jobs
  }

  inline_script = {
    script = buildings/on_all_wilderness_buildings_districts
  }

  ai_estimate_without_unemployment = yes
}

building_churning_tunnels_3 = { # substitute for 'building_mineral_purification_plant'
  icon = "churning_tunnels_3"
  ruined_icon = "wilderness_building_ruined"
  base_buildtime = @buildtime_3
  category = resource
  can_build = no
  can_demolish = yes
  planet_limit = 1

  building_sets = {
    mining
  }

  potential = {
    exists = owner
    owner = { is_wilderness_empire = yes }
  }
  destroy_trigger = {
    exists = owner
    OR = {
      has_modifier = resort_colony
      AND = {
        owner = { is_ai = yes }
        has_any_mining_district_or_building = no
      }
      owner = { is_wilderness_empire = no }
    }
  }
  allow = {
    has_major_upgraded_capital = yes
    NOT = { has_modifier = resort_colony }
  }

  inline_script = {
    script = asr_wa/building_resource_t3
    BASE = food
    RARE = volatile_motes
  }

  prerequisites = {
    "tech_mineral_purification_1"
  }
  show_tech_unlock_if = {
    is_wilderness_empire = yes
  }

  upgrades = {
    building_churning_tunnels_4
  }

  planet_modifier = {
    planet_miners_minerals_produces_add = 2
  }
  triggered_planet_modifier = {
    potential = { has_rare_crystals_deposit = yes }
    planet_miners_rare_crystals_produces_add = 0.5
  }

  inline_script = {
    script = jobs/miners_add
    AMOUNT = @building_static_jobs_very_high
  }

  inline_script = {
    script = buildings/on_all_wilderness_buildings_districts
  }

  ai_estimate_without_unemployment = yes
}

building_churning_tunnels_4 = { # substitute for 'building_mineral_purification_hub'
  icon = "churning_tunnels_4"
  ruined_icon = "wilderness_building_ruined"
  base_buildtime = @buildtime_4
  category = resource
  can_build = no
  can_demolish = yes
  planet_limit = 1

  building_sets = {
    mining
  }

  potential = {
    exists = owner
    owner = { is_wilderness_empire = yes }
  }
  destroy_trigger = {
    exists = owner
    OR = {
      has_modifier = resort_colony
      AND = {
        owner = { is_ai = yes }
        has_any_mining_district_or_building = no
      }
      owner = { is_wilderness_empire = no }
    }
  }
  allow = {
    has_fully_upgraded_capital = yes
    NOT = { has_modifier = resort_colony }
  }

  inline_script = {
    script = asr_wa/building_resource_t4
    BASE = food
    RARE = volatile_motes
  }

  planet_modifier = {
    planet_miners_minerals_produces_add = 2
    pop_mining_drone_bonus_workforce_mult = 0.20
  }
  triggered_planet_modifier = {
    potential = { has_rare_crystals_deposit = yes }
    planet_miners_rare_crystals_produces_add = 0.5
  }
  triggered_planet_modifier = {
    potential = { is_ringworld = yes }
    planet_miners_minerals_produces_add = 2
  }
  # 贝塞里安
  triggered_planet_modifier = {
    potential = {
      has_active_building = building_betharian_power_plant
      exists = orbital_defence
      orbital_defence = {
        exists = starbase
        starbase = {
          has_starbase_building = ring_energy_hub
        }
      }
    }
    planet_miners_energy_produces_add = 2
  }

  inline_script = {
    script = jobs/miners_add
    AMOUNT = @building_static_jobs_very_high
  }

  triggered_desc = {
    text = asr_wa_building_churning_tunnels_4_tt
  }
  triggered_desc = {
    trigger = { has_deposit = d_betharian_deposit }
    text = asr_wa_betharian_tt
  }

  inline_script = {
    script = buildings/on_all_wilderness_buildings_districts
  }

  prerequisites = {
    "tech_mineral_purification_2"
  }

  ai_estimate_without_unemployment = yes

  show_tech_unlock_if = {
    is_wilderness_empire = yes
  }
}

##########
# Storage
##########
@wa_storage_biomass = 50
building_subterranean_cache = { # substitute for 'building_resource_silo'
  icon = "subterranean_cache"
  ruined_icon = "wilderness_building_ruined"
  base_buildtime = @buildtime_1
  category = resource
  can_build = yes
  can_demolish = yes

  building_sets = {
    government
    mining
    farming
    generator
    urban
  }

  inline_script = {
    script = buildings/wilderness_buildings_potential_destroy
  }
  allow = {
    exists = owner
    hidden_trigger = {
      OR = {
        owner = { is_ai = no }
        AND = {
          NOT = { has_building = building_resource_silo }
          OR = {
            is_active_resolution = "resolution_greatergood_balance_in_the_middle"
            is_active_resolution = "resolution_greatergood_universal_prosperity_mandate"
          }
        }
      }
    }
  }

  resources = {
    category = planet_buildings
    cost = {
      food = @wa_b1_foods
      biomass = @wa_storage_biomass
    }
    upkeep = {
      food = @b1_upkeep
    }
  }

  country_modifier = {
    country_resource_max_add = 5000
  }
  triggered_country_modifier = {
    potential = {
      exists = owner
      owner = { has_technology = tech_construction_templates }
    }
    country_resource_max_add = 5000
  }
  triggered_country_modifier = {
    potential = {
      exists = owner
      owner = {
        has_technology = tech_archaeostudies
      }
    }
    country_resource_max_minor_artifacts_add = 100
  }

  inline_script = {
    script = buildings/on_all_wilderness_buildings_districts
  }

  prerequisites = {
    "tech_basic_industry"
  }
  show_tech_unlock_if = {
    is_wilderness_empire = yes
  }

  ai_estimate_without_unemployment = yes
}
