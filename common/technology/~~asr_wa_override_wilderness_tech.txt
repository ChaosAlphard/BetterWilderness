# Gene Crops
tech_gene_crops = {
  cost = @tier2cost1
  area = society
  tier = 2
  category = { biology }
  potential = { always = yes }
  prerequisites = { "tech_eco_simulation" }
  weight = @tier2weight1

  modifier = {
    planet_farmers_food_produces_mult = 0.2
    starbase_constructions_food_produces_mult = 0.10
  }

  weight_modifier = {
    modifier = {
      factor = 0.01
      OR = {
        is_machine_empire = yes
        is_lithoid_empire = yes
        is_individual_machine = yes
        is_infernal_empire = yes
        has_origin = origin_synthetic_fertility
      }
      NOR = {
        has_country_flag = non_lithoid_subspecies
        has_valid_civic = civic_machine_servitor
        has_valid_civic = civic_machine_assimilator
        any_owned_planet = {
          OR = {
            has_any_capped_planet_farming_district = yes
            has_any_agriculture_zone = yes
          }
        }
      }
    }
    modifier = {
      factor = 0.5
      OR = {
        is_machine_empire = yes
        is_lithoid_empire = yes
        is_infernal_empire = yes
        AND = {
          is_individual_machine = yes
          NOT = { has_country_flag = non_lithoid_subspecies }
        }
      }
    }
    modifier = {
      factor = 1.25
      has_ethic = ethic_pacifist
    }
    modifier = {
      factor = 1.5
      has_ethic = ethic_fanatic_pacifist
    }
    modifier = {
      factor = 2
      has_relic = r_pox_sample
    }
    modifier = {
      factor = 2
      country_uses_bio_ships = yes
    }
  }

  ai_weight = {
    factor = @farming_ai_weight_factor
    modifier = {
      factor = 1.25
      has_ethic = ethic_pacifist
    }
    modifier = {
      factor = 1.5
      has_ethic = ethic_fanatic_pacifist
    }
  }
}
# Nano-Vitality Crops
tech_nano_vitality_crops = {
  cost = @tier3cost1
  area = society
  tier = 3
  category = { biology }
  potential = { always = yes }
  prerequisites = { "tech_gene_crops" }
  weight = @tier3weight1

  modifier = {
    planet_farmers_food_produces_mult = 0.2
    starbase_constructions_food_produces_mult = 0.10
  }

  weight_modifier = {
    modifier = {
      factor = 0.01
      OR = {
        is_machine_empire = yes
        is_lithoid_empire = yes
        is_individual_machine = yes
        is_infernal_empire = yes
        has_origin = origin_synthetic_fertility
      }
      NOR = {
        has_country_flag = non_lithoid_subspecies
        has_valid_civic = civic_machine_servitor
        has_valid_civic = civic_machine_assimilator
        any_owned_planet = {
          OR = {
            has_any_capped_planet_farming_district = yes
            has_any_agriculture_zone = yes
          }
        }
      }
    }
    modifier = {
      factor = 0.5
      OR = {
        is_machine_empire = yes
        is_lithoid_empire = yes
        is_infernal_empire = yes
        AND = {
          is_individual_machine = yes
          NOT = { has_country_flag = non_lithoid_subspecies }
        }
      }
    }
    modifier = {
      factor = 1.25
      has_ethic = ethic_pacifist
    }
    modifier = {
      factor = 1.5
      has_ethic = ethic_fanatic_pacifist
    }
    modifier = {
      factor = 2
      has_relic = r_pox_sample
    }
    modifier = {
      factor = 2
      country_uses_bio_ships = yes
    }
  }

  ai_weight = {
    factor = @farming_ai_weight_factor
    modifier = {
      factor = 1.25
      has_ethic = ethic_pacifist
    }
    modifier = {
      factor = 1.5
      has_ethic = ethic_fanatic_pacifist
    }
  }
}

tech_nutrient_replication = {
  cost = @tier4cost3
  area = society
  tier = 4
  is_rare = yes
  category = { biology }
  potential = { always = yes }
  prerequisites = { "tech_nano_vitality_crops" }
  weight = @tier4weight3

  modifier = {
    planet_jobs_food_produces_mult = 0.15
    starbase_constructions_food_produces_mult = 0.10
  }

  potential = {
    is_machine_empire = no
  }

  weight_modifier = {
    modifier = {
      factor = 0.01
      OR = {
        is_machine_empire = yes
        is_lithoid_empire = yes
        is_individual_machine = yes
        is_infernal_empire = yes
        has_origin = origin_synthetic_fertility
      }
      NOR = {
        has_country_flag = non_lithoid_subspecies
        has_valid_civic = civic_machine_servitor
        has_valid_civic = civic_machine_assimilator
        any_owned_planet = {
          OR = {
            has_any_capped_planet_farming_district = yes
            has_any_agriculture_zone = yes
          }
        }
      }
    }
    modifier = {
      factor = 0.5
      OR = {
        is_machine_empire = yes
        is_lithoid_empire = yes
        is_infernal_empire = yes
        AND = {
          is_individual_machine = yes
          NOT = { has_country_flag = non_lithoid_subspecies }
        }
      }
    }
    modifier = {
      factor = 0.50
      NOR = {
        has_trait_in_council = { TRAIT = leader_trait_expertise_biology }
        has_trait_in_council = { TRAIT = leader_trait_curator }
      }
    }
    inline_script = {
      script = technologies/rare_technologies_weight_modifiers
      TECHNOLOGY = tech_nutrient_replication
    }
    modifier = {
      factor = 1.25
      has_ethic = ethic_pacifist
    }
    modifier = {
      factor = 1.5
      has_ethic = ethic_fanatic_pacifist
    }
    modifier = {
      factor = 2
      has_relic = r_pox_sample
    }
    modifier = {
      factor = 2
      country_uses_bio_ships = yes
    }
  }

  ai_weight = {
    factor = @farming_ai_weight_factor
    modifier = {
      factor = 1.25
      has_ethic = ethic_pacifist
    }
    modifier = {
      factor = 1.5
      has_ethic = ethic_fanatic_pacifist
    }
  }
}

tech_repeatable_improved_tile_food_output = {
  area = society
  cost = @repeatableTechBaseCost
  cost_per_level = @repeatableTechLevelCost
  tier = @repeatableTechTier
  category = { biology }
  levels = -1

  potential = { always = yes }
  prerequisites = { "tech_gene_crops" }

  weight = @repeatableTechWeight

  weight_modifier = {
    factor = @repatableTechFactor
    modifier = {
      factor = 0
      has_country_flag = VRH_tech_repeatable_improved_tile_food_output
    }
  }

  ai_weight = {
    factor = 1.0
  }

  weight_groups = {
    repeatable
  }
  mod_weight_if_group_picked = {
    repeatable = 0.01
  }

  modifier = {
    planet_jobs_food_produces_mult = 0.05
  }
}
